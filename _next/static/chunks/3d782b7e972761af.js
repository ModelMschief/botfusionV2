(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},93272,e=>{"use strict";var t=e.i(71645),s=e.i(9165);function a(){let[e,a]=(0,t.useState)([]),[r,l]=(0,t.useState)([]),[i,d]=(0,t.useState)({type:"free"}),[n,c]=(0,t.useState)(!0),[o,x]=(0,t.useState)(""),m=(0,t.useCallback)(async()=>{try{let e=await s.api.get("/dashboard");a(e.data.bots);let t=e.data.tasks.map(e=>({...e,id:e.id||e._id}));l(t.reverse()),d(e.data.plan),x("")}catch(e){console.error("Failed to fetch dashboard",e)}finally{c(!1)}},[]);(0,t.useEffect)(()=>{m()},[m]);let p=async e=>{try{let t=await s.api.post("/add-bot",{bot_token:e});return await m(),{success:!0,message:t.data.message}}catch(e){return{success:!1,message:e.response?.data?.error||"Failed to add bot"}}};return{bots:e,tasks:r,plan:i,loading:n,error:o,refresh:m,addBot:p,deleteBot:async e=>{try{return await s.api.post("/delete-bot",{bot_token:e}),a(t=>t.filter(t=>t.token!==e)),!0}catch(e){return console.error("Failed to delete bot",e),!1}},uploadUsers:async(e,t)=>{let a=new FormData;a.append("bot_token",e),a.append("file",t);try{let e=await s.api.post("/upload-users",a,{headers:{"Content-Type":"multipart/form-data"}});return m(),{success:!0,message:e.data.message}}catch(e){return{success:!1,message:e.response?.data?.error||e.message||"Upload failed"}}}}}e.s(["useDashboard",()=>a])},30257,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75254);let r=(0,a.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),l=(0,a.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),i=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=(0,a.default)("file-up",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);var n=e.i(21218),c=e.i(39312);let o=(0,a.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),x=(0,a.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var m=e.i(31278);let p=(0,a.default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var u=e.i(37727),h=e.i(17923),b=e.i(46932),v=e.i(88653),g=e.i(93272);let f=(0,a.default)("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]),j=(0,a.default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),y=(0,a.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),N=(0,a.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),k=(0,a.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),w=(0,a.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),C=(0,a.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var z=e.i(9165);function S({isOpen:e,onClose:a,bots:r,onTaskStarted:d}){let[n,c]=(0,s.useState)("input"),[x,m]=(0,s.useState)("text"),[p,h]=(0,s.useState)(""),[v,g]=(0,s.useState)([]),[S,M]=(0,s.useState)(null),[B,A]=(0,s.useState)(null),[_,F]=(0,s.useState)({sent:0,failed:0,total:0}),[T,L]=(0,s.useState)(!1),[U,D]=(0,s.useState)([]),E=(0,s.useRef)(null),P=(e,t,s,a)=>{let r=[...v];r[e][t][s]=a,g(r)},q=async()=>{if(!p&&"text"===x||!S&&"text"!==x)return;if(U.length===r.length)return void alert("Please select at least one bot.");let e=new FormData;e.append("message",p),e.append("content_type",x);let t=v.flat().filter(e=>e.text&&e.url);e.append("buttons",JSON.stringify(t)),e.append("excluded_bot_tokens",JSON.stringify(U)),S&&e.append("file",S);try{let t=await z.api.post("/start-broadcast",e,{headers:{"Content-Type":"multipart/form-data"}});A(t.data.task_id),d(t.data.task_id),c("sending"),I(t.data.task_id)}catch(e){console.error("Broadcast failed",e),alert("Failed to start broadcast: "+(e.response?.data?.error||e.message||"Unknown error"))}},I=e=>{E.current=setInterval(async()=>{try{let t=(await z.api.get(`/task-status/${e}`)).data;t.progress&&F({sent:t.progress.sent||0,failed:t.progress.failed||0,total:t.progress.total||0}),("complete"===t.status||"stopped"===t.status)&&(c("complete"),E.current&&clearInterval(E.current))}catch(e){console.error("Poll failed",e)}},2e3)},H=async()=>{B&&await z.api.post(`/stop-broadcast/${B}`)};return((0,s.useEffect)(()=>()=>{E.current&&clearInterval(E.current)},[]),(0,s.useEffect)(()=>{},[e,n]),e)?T?(0,t.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 card w-80 bg-[var(--bg-surface)] border-[var(--primary-color)] shadow-2xl p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-bold text-sm",children:"Broadcasting..."}),(0,t.jsxs)("p",{className:"text-xs text-[var(--text-muted)]",children:["Sent: ",_.sent," / ",_.total]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>L(!1),className:"hover:text-cyan-400",children:(0,t.jsx)(C,{size:16})}),(0,t.jsx)("button",{onClick:a,className:"hover:text-red-400",children:(0,t.jsx)(u.X,{size:16})})]})]}):(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,t.jsxs)(b.motion.div,{initial:{scale:.95},animate:{scale:1},className:"card w-full max-w-2xl bg-[var(--bg-surface)] border-[var(--border-color)] flex flex-col max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-[var(--border-color)]",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(f,{className:"text-[var(--primary-color)]"}),"Broadcaster"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["sending"===n&&(0,t.jsx)("button",{onClick:()=>L(!0),className:"p-2 hover:bg-[var(--bg-app)] rounded",children:(0,t.jsx)(w,{size:20})}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-[var(--bg-app)] rounded text-red-400/80 hover:text-red-400",children:(0,t.jsx)(u.X,{size:20})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:["input"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-[var(--bg-app)] rounded-lg p-4 border border-[var(--border-color)]",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold mb-3 flex items-center justify-between",children:["Target Bots",(0,t.jsxs)("span",{className:"text-xs font-normal text-[var(--text-muted)]",children:[r.length-U.length," / ",r.length," selected"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto custom-scrollbar",children:r.map(e=>{let s=!U.includes(e.token);return(0,t.jsxs)("label",{className:`flex items-center gap-2 p-2 rounded border cursor-pointer transition-colors ${s?"bg-[var(--bg-surface)] border-green-500/50":"bg-[#020617] border-transparent opacity-60"}`,children:[(0,t.jsx)("input",{type:"checkbox",className:"w-4 h-4 rounded accent-green-500",checked:s,onChange:()=>{var t;return t=e.token,void(U.includes(t)?D(U.filter(e=>e!==t)):D([...U,t]))}}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsx)("div",{className:"text-xs font-bold truncate",children:e.username}),(0,t.jsxs)("div",{className:"text-[10px] text-[var(--text-muted)]",children:[e.user_count," users"]})]})]},e.token)})})]}),(0,t.jsx)("div",{className:"flex bg-[var(--bg-app)] p-1 rounded-lg",children:["text","image","video"].map(e=>(0,t.jsxs)("button",{onClick:()=>m(e),className:`flex-1 py-2 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-colors ${x===e?"bg-[var(--bg-surface)] shadow text-[var(--primary-color)]":"text-[var(--text-muted)] hover:text-[var(--text-primary)]"}`,children:["text"===e&&(0,t.jsx)(k,{size:16}),"image"===e&&(0,t.jsx)(y,{size:16}),"video"===e&&(0,t.jsx)(N,{size:16}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"text"!==x&&(0,t.jsxs)("div",{className:"border-2 border-dashed border-[var(--border-color)] rounded-xl p-8 text-center hover:border-[var(--primary-color)]/50 transition-colors cursor-pointer",onClick:()=>document.getElementById("media-upload")?.click(),children:[(0,t.jsx)("input",{id:"media-upload",type:"file",className:"hidden",accept:"image"===x?"image/*":"video/*",onChange:e=>M(e.target.files?.[0]||null)}),S?(0,t.jsxs)("div",{className:"text-green-500 font-bold flex items-center justify-center gap-2",children:[(0,t.jsx)(j,{size:20})," ",S.name]}):(0,t.jsxs)("div",{className:"text-[var(--text-muted)]",children:[(0,t.jsxs)("p",{className:"mb-2",children:["Click to upload ",x]}),(0,t.jsx)("p",{className:"text-xs",children:"Max size: 10MB"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2",children:"text"===x?"Message":"Caption (Optional)"}),(0,t.jsx)("textarea",{value:p,onChange:e=>h(e.target.value),className:"input-field min-h-[120px]",placeholder:"text"===x?"Hello everyone...":"Describe this media..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("label",{className:"text-sm font-bold",children:"Inline Buttons"}),(0,t.jsxs)("button",{onClick:()=>{g([...v,[{text:"",url:""}]])},className:"text-xs text-[var(--primary-color)] flex items-center gap-1 hover:underline",children:[(0,t.jsx)(i,{size:14})," Add Row"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:v.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("input",{className:"input-field py-1 text-sm flex-1",placeholder:"Button Text",value:e[0].text,onChange:e=>P(s,0,"text",e.target.value)}),(0,t.jsx)("input",{className:"input-field py-1 text-sm flex-1",placeholder:"URL (https://...)",value:e[0].url,onChange:e=>P(s,0,"url",e.target.value)}),(0,t.jsx)("button",{onClick:()=>{g(v.filter((e,t)=>t!==s))},className:"text-red-500 hover:bg-red-500/10 p-1 rounded",children:(0,t.jsx)(o,{size:16})})]},s))})]})]}),("sending"===n||"complete"===n)&&(0,t.jsxs)("div",{className:"text-center py-10 space-y-6",children:[(0,t.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-[var(--bg-app)]"}),(0,t.jsx)(b.motion.div,{className:"absolute inset-0 rounded-full border-4 border-[var(--primary-color)] border-t-transparent",animate:"sending"===n?{rotate:360}:{},transition:{repeat:1/0,duration:1,ease:"linear"}}),(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center font-bold text-2xl",children:[_.total>0?Math.round(_.sent/_.total*100):0,"%"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto",children:[(0,t.jsxs)("div",{className:"card p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-500",children:_.sent}),(0,t.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"SENT"})]}),(0,t.jsxs)("div",{className:"card p-3 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-500",children:_.failed}),(0,t.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"FAILED"})]})]}),"complete"===n&&(0,t.jsx)("p",{className:"text-green-500 font-bold",children:"Broadcast Complete!"})]})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-[var(--border-color)] flex justify-end gap-3",children:["input"===n&&(0,t.jsxs)("button",{onClick:q,className:"btn btn-primary flex gap-2 items-center",children:[(0,t.jsx)(l,{size:18})," Start Broadcast"]}),"sending"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:a,className:"btn bg-[var(--bg-app)] hover:bg-[var(--bg-surface)] text-[var(--text-muted)]",children:"Background"}),(0,t.jsx)("button",{onClick:H,className:"btn bg-red-500 hover:bg-red-600 text-white",children:"Stop Broadcast"})]}),"complete"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{c("input"),A(null),F({sent:0,failed:0,total:0}),h(""),M(null),g([])},className:"btn bg-[var(--bg-surface)] hover:bg-[var(--bg-app)]",children:"New Broadcast"}),(0,t.jsx)("button",{onClick:a,className:"btn btn-primary",children:"Close"})]})]})]})}):null}function M(){let{bots:e,tasks:a,plan:f,loading:j,refresh:y,addBot:N,deleteBot:k,uploadUsers:w}=(0,g.useDashboard)(),[C,z]=(0,s.useState)(!1),[M,A]=(0,s.useState)(""),[_,F]=(0,s.useState)(!1),[T,L]=(0,s.useState)(!1),[U,D]=(0,s.useState)(null),[E,P]=(0,s.useState)(null),[q,I]=(0,s.useState)(!1),[H,V]=(0,s.useState)(!1),[$,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=()=>O(!0);return window.addEventListener("openStatsModal",e),()=>window.removeEventListener("openStatsModal",e)},[]);let R=e.reduce((e,t)=>e+t.user_count,0),X=a.filter(e=>"running"===e.status).length,K=async e=>{e.preventDefault(),F(!0);let t=await N(M);F(!1),t.success?(z(!1),A("")):alert(t.message)};return j?(0,t.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-80px)]",children:(0,t.jsx)(m.Loader2,{className:"animate-spin text-[var(--primary-color)]",size:48})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(B,{title:"Total Audience",value:R.toLocaleString(),icon:(0,t.jsx)(r,{className:"text-blue-400"}),trend:"+12% this week"}),(0,t.jsx)(B,{title:"Active Bots",value:e.length.toString(),icon:(0,t.jsx)(x,{className:"text-purple-400"})}),(0,t.jsx)(B,{title:"Broadcasts",value:a.length.toString(),icon:(0,t.jsx)(n.Activity,{className:"text-green-400"}),trend:`${X} running`})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(c.Zap,{className:"text-[var(--primary-color)]",size:20}),"Your Fleet"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>V(!0),disabled:0===e.length,className:"btn bg-[var(--bg-surface)] border border-[var(--border-color)] hover:bg-[var(--bg-surface-hover)] flex items-center gap-2 disabled:opacity-50",children:[(0,t.jsx)(l,{size:16})," Broadcast"]}),(0,t.jsxs)("button",{onClick:()=>z(!0),className:"btn btn-primary flex items-center gap-2 text-sm",children:[(0,t.jsx)(i,{size:16})," Add Bot"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(v.AnimatePresence,{children:e.map(e=>(0,t.jsxs)(b.motion.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"card group hover:border-[var(--primary-color)]/50 transition-colors relative",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-[var(--bg-app)] border border-[var(--border-color)] flex items-center justify-center",children:(0,t.jsx)(x,{size:20,className:"text-[var(--text-muted)]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.username}),(0,t.jsxs)("p",{className:"text-xs text-[var(--text-muted)] font-mono",children:[e.token.substring(0,10),"..."]})]})]}),(0,t.jsx)("button",{onClick:()=>k(e.token),className:"text-red-500/0 group-hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-1 hover:bg-red-500/10 rounded",title:"Delete Bot",children:(0,t.jsx)(o,{size:16})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-[var(--text-muted)]",children:"Subscribers"}),(0,t.jsx)("span",{className:"font-bold",children:e.user_count.toLocaleString()})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-[var(--border-color)] flex gap-2",children:[(0,t.jsx)("button",{className:"flex-1 py-1.5 text-xs bg-[var(--bg-app)] hover:bg-[var(--primary-color)]/10 hover:text-[var(--primary-color)] rounded transition-colors",onClick:()=>{D(e.token),L(!0)},children:"Upload Users"}),(0,t.jsx)("button",{onClick:()=>V(!0),className:"flex-1 py-1.5 text-xs bg-[var(--bg-app)] hover:bg-blue-500/10 hover:text-blue-400 rounded transition-colors",children:"Broadcast"})]})]},e.token))}),0===e.length&&(0,t.jsxs)("div",{className:"col-span-full py-12 text-center text-[var(--text-muted)] border border-dashed border-[var(--border-color)] rounded-xl",children:[(0,t.jsx)(x,{size:48,className:"mx-auto mb-4 opacity-20"}),(0,t.jsx)("p",{children:"No bots connected yet."}),(0,t.jsx)("button",{onClick:()=>z(!0),className:"text-[var(--primary-color)] hover:underline mt-2",children:"Add your first bot"})]})]})]}),(0,t.jsxs)("div",{className:"hidden lg:block lg:col-span-1 space-y-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(n.Activity,{className:"text-blue-400",size:20}),"Recent Tasks"]}),(0,t.jsx)("div",{className:"card space-y-4 max-h-[600px] overflow-y-auto",children:0===a.length?(0,t.jsx)("p",{className:"text-center text-[var(--text-muted)] py-4",children:"No recent activity."}):a.slice(0,10).map(e=>(0,t.jsxs)("div",{className:"p-3 bg-[var(--bg-app)] rounded-lg border border-[var(--border-color)]",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("span",{className:`text-xs font-bold uppercase px-2 py-0.5 rounded ${"complete"===e.status?"bg-green-500/10 text-green-500":"failed"===e.status?"bg-red-500/10 text-red-500":"bg-blue-500/10 text-blue-500 animate-pulse"}`,children:e.status}),(0,t.jsx)("span",{className:"text-[10px] text-[var(--text-muted)]",children:new Date(e.created_at).toLocaleTimeString()})]}),(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:"broadcast"===e.type?"ðŸ“¢ Broadcast":"ðŸ“‚ File Parse"}),"broadcast"===e.type&&e.progress&&(0,t.jsxs)("div",{className:"text-xs text-[var(--text-muted)]",children:["Sent: ",e.progress.sent," / ",e.progress.total,e.progress.failed?(0,t.jsxs)("span",{className:"text-red-400 ml-2",children:["(",e.progress.failed," failed)"]}):null]}),"file_parse"===e.type&&e.progress&&(0,t.jsxs)("div",{className:"text-xs text-[var(--text-muted)]",children:["Found: ",e.progress.found," | Added: ",e.progress.added]})]},e._id))})]})]}),(0,t.jsx)(S,{isOpen:H,onClose:()=>V(!1),bots:e,onTaskStarted:e=>{y()}}),(0,t.jsx)(v.AnimatePresence,{children:C&&(0,t.jsx)(b.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,t.jsxs)(b.motion.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"card w-full max-w-md bg-[var(--bg-surface)] border-[var(--border-color)]",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Connect New Bot"}),(0,t.jsxs)("form",{onSubmit:K,children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bot Token"}),(0,t.jsx)("input",{type:"text",value:M,onChange:e=>A(e.target.value),className:"input-field font-mono text-sm",placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",required:!0}),(0,t.jsx)("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Paste the token from BotFather. We'll automatically fetch the username."})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>z(!1),className:"px-4 py-2 rounded-lg hover:bg-[var(--bg-app)] transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",disabled:_,children:[_?(0,t.jsx)(m.Loader2,{className:"animate-spin",size:16}):(0,t.jsx)(i,{size:16}),"Connect Bot"]})]})]})]})})}),(0,t.jsx)(v.AnimatePresence,{children:T&&(0,t.jsx)(b.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,t.jsxs)(b.motion.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"card w-full max-w-lg bg-[var(--bg-surface)] border-[var(--border-color)]",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(p,{className:"text-[var(--primary-color)]"})," Upload Users"]}),(0,t.jsx)("button",{onClick:()=>{L(!1),P(null)},children:(0,t.jsx)(u.X,{size:20})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed border-[var(--border-color)] rounded-xl p-8 text-center hover:border-[var(--primary-color)]/50 transition-colors cursor-pointer",onClick:()=>document.getElementById("user-file-upload")?.click(),children:[(0,t.jsx)("input",{id:"user-file-upload",type:"file",className:"hidden",accept:".txt,.csv,.xml,.json",onChange:e=>P(e.target.files?.[0]||null)}),E?(0,t.jsxs)("div",{className:"text-green-500 font-bold flex flex-col items-center gap-2",children:[(0,t.jsx)(d,{size:32}),E.name,(0,t.jsxs)("span",{className:"text-xs text-[var(--text-muted)] font-normal",children:[(E.size/1024).toFixed(1)," KB"]})]}):(0,t.jsxs)("div",{className:"text-[var(--text-muted)]",children:[(0,t.jsx)(p,{size:32,className:"mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{className:"font-medium",children:"Click to select file"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"Supported: .txt, .csv, .xml, .json (One ID per line)"})]})]}),(0,t.jsx)("div",{className:"flex justify-end gap-3",children:(0,t.jsxs)("button",{className:"btn btn-primary w-full flex justify-center items-center gap-2",disabled:!E||q,onClick:async()=>{if(!E||!U)return;I(!0);let e=await w(U,E);I(!1),e.success?(alert(e.message),L(!1),P(null),y()):alert("Upload Error: "+e.message)},children:[q?(0,t.jsx)(m.Loader2,{className:"animate-spin"}):(0,t.jsx)(p,{size:18}),"Start Upload"]})})]})]})})}),(0,t.jsx)(v.AnimatePresence,{children:$&&(0,t.jsx)(b.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-[var(--bg-app)] overflow-y-auto md:hidden",children:(0,t.jsxs)("div",{className:"p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(h.BarChart3,{className:"text-blue-400",size:24}),"Stats & History"]}),(0,t.jsx)("button",{onClick:()=>O(!1),className:"p-2 bg-[var(--bg-surface)] rounded-full border border-[var(--border-color)]",children:(0,t.jsx)(u.X,{size:20})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsx)(B,{title:"Total Audience",value:R.toLocaleString(),icon:(0,t.jsx)(r,{className:"text-blue-400"}),trend:"+12% this week"}),(0,t.jsx)(B,{title:"Active Bots",value:e.length.toString(),icon:(0,t.jsx)(x,{className:"text-purple-400"})}),(0,t.jsx)(B,{title:"Broadcasts",value:a.length.toString(),icon:(0,t.jsx)(n.Activity,{className:"text-green-400"}),trend:`${X} running`})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,t.jsx)(n.Activity,{className:"text-blue-400",size:18}),"Recent Tasks"]}),(0,t.jsx)("div",{className:"space-y-3",children:0===a.length?(0,t.jsx)("p",{className:"text-center text-[var(--text-muted)] py-4 bg-[var(--bg-surface)] rounded-lg border border-[var(--border-color)]",children:"No recent activity."}):a.slice(0,10).map(e=>(0,t.jsxs)("div",{className:"p-3 bg-[var(--bg-surface)] rounded-lg border border-[var(--border-color)]",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("span",{className:`text-xs font-bold uppercase px-2 py-0.5 rounded ${"complete"===e.status?"bg-green-500/10 text-green-500":"failed"===e.status?"bg-red-500/10 text-red-500":"bg-blue-500/10 text-blue-500 animate-pulse"}`,children:e.status}),(0,t.jsx)("span",{className:"text-[10px] text-[var(--text-muted)]",children:new Date(e.created_at).toLocaleTimeString()})]}),(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:"broadcast"===e.type?"ðŸ“¢ Broadcast":"ðŸ“‚ File Parse"}),"broadcast"===e.type&&e.progress&&(0,t.jsxs)("div",{className:"text-xs text-[var(--text-muted)]",children:["Sent: ",e.progress.sent," / ",e.progress.total,e.progress.failed?(0,t.jsxs)("span",{className:"text-red-400 ml-2",children:["(",e.progress.failed," failed)"]}):null]}),"file_parse"===e.type&&e.progress&&(0,t.jsxs)("div",{className:"text-xs text-[var(--text-muted)]",children:["Found: ",e.progress.found," | Added: ",e.progress.added]})]},e._id))})]}),(0,t.jsx)("button",{onClick:()=>O(!1),className:"w-full btn bg-[var(--bg-surface)] border border-[var(--border-color)] py-3",children:"Close"})]})})})]})}function B({title:e,value:s,icon:a,trend:r}){return(0,t.jsxs)("div",{className:"card hover:border-[var(--primary-color)]/30 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-[var(--text-muted)] text-sm font-medium",children:e}),(0,t.jsx)("div",{className:"p-2 bg-[var(--bg-app)] rounded-lg border border-[var(--border-color)]",children:a})]}),(0,t.jsx)("div",{className:"text-3xl font-bold mb-1",children:s}),r&&(0,t.jsx)("div",{className:"text-xs text-[var(--primary-color)] font-medium",children:r})]})}e.s(["default",()=>M],30257)}]);